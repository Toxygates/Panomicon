
  <property environment="env" />

  <!-- set scala.home -->
  <property name="scala.home" value="${env.SCALA_HOME}" />

  <property name="sources.dir" value="src" />
  <property name="lib.dir" value="lib" />
  <property name="build.dir" value="classes" />
  <property name="docs.dir" value="docs" />
  <property name="testbuild.dir" value="test-classes" />
  <property name="test-sources.dir" value="test" />

  <property name="scala-library.jar" value="${scala.home}/lib/scala-library.jar" />
  <property name="scala-compiler.jar" value="${scala.home}/lib/scala-compiler.jar" />
  <property name="scala.reflect" value="${scala.home}/lib/scala-reflect.jar"/>
  <property name="scala.xml" value="${scala.home}/lib/scala-xml_2.12-1.0.6.jar"/>

  <taskdef resource="scala/tools/ant/antlib.xml">
  <classpath>
    <pathelement location="${scala-compiler.jar}" />
    <pathelement location="${scala-library.jar}" />
    <pathelement location="${scala.reflect}"/>
    <pathelement location="${scala.xml}"/>
  </classpath>
  </taskdef>

  <target name="ivyreport">
    <ivy:report dot="true" />
  </target>

  <ivy:cachepath file="../ivy.xml" pathid="ivy.classpath" />

  <target name="test" depends="classfiles">
    <taskdef name="scalatest" classname="org.scalatest.tools.ScalaTestAntTask">
      <classpath refid="test.classpath" />
    </taskdef>
    <scalatest fork="true" parallel="false">
      <reporter type="stdout" config="FD"/>
      <reporter type="file" filename="tests.out"/>
      <runpath>
        <pathelement location="${testbuild.dir}" />
      </runpath>
    </scalatest>
  </target>

  <target name="docs">
    <mkdir dir="${docs.dir}" />

    <scaladoc srcdir="${sources.dir}"
      destdir="${docs.dir}"
      classpathref="compile.classpath"
      diagrams="on"
      nofail="on"
      addparams="-no-java-comments"
      doctitle="Toxygates library documentation">
      <include name="**/*.scala" />
      <include name="**/*.java" />
    </scaladoc>
  </target>
